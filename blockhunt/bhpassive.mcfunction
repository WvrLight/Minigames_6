execute align xyz at @e[tag=block,scores={block=1}] align xyz run summon minecraft:falling_block ~0.5 ~ ~0.5 {BlockState:{Name:"minecraft:fletching_table"},NoGravity:1b,Team:"block",Team:"block",Time:-1,DropItem:0b}
execute align xyz at @e[tag=block,scores={block=2}] align xyz run summon minecraft:falling_block ~0.5 ~ ~0.5 {BlockState:{Name:"minecraft:anvil"},NoGravity:1b,Team:"block",Time:-1,DropItem:0b}
execute align xyz at @e[tag=block,scores={block=3}] align xyz run summon minecraft:falling_block ~0.5 ~ ~0.5 {BlockState:{Name:"minecraft:pumpkin"},NoGravity:1b,Team:"block",Time:-1,DropItem:0b}
execute align xyz at @e[tag=block,scores={block=4}] align xyz run summon minecraft:falling_block ~0.5 ~ ~0.5 {BlockState:{Name:"minecraft:note_block"},NoGravity:1b,Team:"block",Time:-1,DropItem:0b}
execute align xyz at @e[tag=block,scores={block=5}] align xyz run summon minecraft:falling_block ~0.5 ~ ~0.5 {BlockState:{Name:"minecraft:jungle_log"},NoGravity:1b,Team:"block",Time:-1,DropItem:0b}
execute align xyz at @e[tag=block,scores={block=6}] align xyz run summon minecraft:falling_block ~0.5 ~ ~0.5 {BlockState:{Name:"minecraft:spruce_log"},NoGravity:1b,Team:"block",Time:-1,DropItem:0b}
execute align xyz at @e[tag=block,scores={block=7}] align xyz run summon minecraft:falling_block ~0.5 ~ ~0.5 {BlockState:{Name:"minecraft:cartography_table"},NoGravity:1b,Team:"block",Time:-1,DropItem:0b}
execute align xyz at @e[tag=block,scores={block=8}] align xyz run summon minecraft:falling_block ~0.5 ~ ~0.5 {BlockState:{Name:"minecraft:blast_furnace"},NoGravity:1b,Team:"block",Time:-1,DropItem:0b}
execute align xyz at @e[tag=block,scores={block=9}] align xyz run summon minecraft:falling_block ~0.5 ~ ~0.5 {BlockState:{Name:"minecraft:crafting_table"},NoGravity:1b,Team:"block",Time:-1,DropItem:0b}
execute align xyz at @e[tag=block,scores={block=10}] align xyz run summon minecraft:falling_block ~0.5 ~ ~0.5 {BlockState:{Name:"minecraft:oak_log"},NoGravity:1b,Team:"block",Time:-1,DropItem:0b}
execute align xyz at @e[tag=block,scores={block=11}] align xyz run summon minecraft:falling_block ~0.5 ~ ~0.5 {BlockState:{Name:"minecraft:hay_block"},NoGravity:1b,Team:"block",Time:-1,DropItem:0b}
execute align xyz at @e[tag=block,scores={block=12}] align xyz run summon minecraft:falling_block ~0.5 ~ ~0.5 {BlockState:{Name:"minecraft:spruce_planks"},NoGravity:1b,Team:"block",Time:-1,DropItem:0b}
execute align xyz at @e[tag=block,scores={block=13}] align xyz run summon minecraft:falling_block ~0.5 ~ ~0.5 {BlockState:{Name:"minecraft:oak_planks"},NoGravity:1b,Team:"block",Time:-1,DropItem:0b}
execute align xyz at @e[tag=block,scores={block=14}] align xyz run summon minecraft:falling_block ~0.5 ~ ~0.5 {BlockState:{Name:"minecraft:acacia_planks"},NoGravity:1b,Team:"block",Time:-1,DropItem:0b}
execute align xyz at @e[tag=block,scores={block=15}] align xyz run summon minecraft:falling_block ~0.5 ~ ~0.5 {BlockState:{Name:"minecraft:birch_planks"},NoGravity:1b,Team:"block",Time:-1,DropItem:0b}
execute align xyz at @e[tag=block,scores={block=16}] align xyz run summon minecraft:falling_block ~0.5 ~ ~0.5 {BlockState:{Name:"minecraft:stone_bricks"},NoGravity:1b,Team:"block",Time:-1,DropItem:0b}
execute align xyz at @e[tag=block,scores={block=17}] align xyz run summon minecraft:falling_block ~0.5 ~ ~0.5 {BlockState:{Name:"minecraft:bookshelf"},NoGravity:1b,Team:"block",Time:-1,DropItem:0b}
execute align xyz at @e[tag=block,scores={block=18}] align xyz run summon minecraft:falling_block ~0.5 ~ ~0.5 {BlockState:{Name:"minecraft:furnace"},NoGravity:1b,Team:"block",Time:-1,DropItem:0b}
execute align xyz at @e[tag=block,scores={block=19}] align xyz run summon minecraft:falling_block ~0.5 ~ ~0.5 {BlockState:{Name:"minecraft:barrel"},NoGravity:1b,Team:"block",Time:-1,DropItem:0b}
execute align xyz at @e[tag=block,scores={block=20}] align xyz run summon minecraft:falling_block ~0.5 ~ ~0.5 {BlockState:{Name:"minecraft:loom"},NoGravity:1b,Team:"block",Time:-1,DropItem:0b}
execute align xyz at @e[tag=block,scores={block=21}] align xyz run summon minecraft:falling_block ~0.5 ~ ~0.5 {BlockState:{Name:"minecraft:smithing_table"},NoGravity:1b,Team:"block",Time:-1,DropItem:0b}
execute align xyz at @e[tag=block,scores={block=22}] align xyz run summon minecraft:falling_block ~0.5 ~ ~0.5 {BlockState:{Name:"minecraft:smoker"},NoGravity:1b,Team:"block",Time:-1,DropItem:0b}
execute align xyz at @e[tag=block,scores={block=23}] align xyz run summon minecraft:falling_block ~0.5 ~ ~0.5 {BlockState:{Name:"minecraft:nether_wart_block"},NoGravity:1b,Team:"block",Time:-1,DropItem:0b}
execute align xyz at @e[tag=block,scores={block=24}] align xyz run summon minecraft:falling_block ~0.5 ~ ~0.5 {BlockState:{Name:"minecraft:scaffolding"},NoGravity:1b,Team:"block",Time:-1,DropItem:0b}
execute align xyz at @e[tag=block,scores={block=25}] align xyz run summon minecraft:falling_block ~0.5 ~ ~0.5 {BlockState:{Name:"minecraft:dried_kelp_block"},NoGravity:1b,Team:"block",Time:-1,DropItem:0b}
execute align xyz at @e[tag=block,scores={block=26}] align xyz run summon minecraft:falling_block ~0.5 ~ ~0.5 {BlockState:{Name:"minecraft:bubble_coral_block"},NoGravity:1b,Team:"block",Time:-1,DropItem:0b}
execute align xyz at @e[tag=block,scores={block=27}] align xyz run summon minecraft:falling_block ~0.5 ~ ~0.5 {BlockState:{Name:"minecraft:fire_coral_block"},NoGravity:1b,Team:"block",Time:-1,DropItem:0b}
execute align xyz at @e[tag=block,scores={block=28}] align xyz run summon minecraft:falling_block ~0.5 ~ ~0.5 {BlockState:{Name:"minecraft:tube_coral_block"},NoGravity:1b,Team:"block",Time:-1,DropItem:0b}
execute align xyz at @e[tag=block,scores={block=29}] align xyz run summon minecraft:falling_block ~0.5 ~ ~0.5 {BlockState:{Name:"minecraft:horn_coral_block"},NoGravity:1b,Team:"block",Time:-1,DropItem:0b}
execute align xyz at @e[tag=block,scores={block=30}] align xyz run summon minecraft:falling_block ~0.5 ~ ~0.5 {BlockState:{Name:"minecraft:brain_coral_block"},NoGravity:1b,Team:"block",Time:-1,DropItem:0b}
execute align xyz at @e[tag=block,scores={block=31}] align xyz run summon minecraft:falling_block ~0.5 ~ ~0.5 {BlockState:{Name:"minecraft:tnt"},NoGravity:1b,Team:"block",Time:-1,DropItem:0b}
execute align xyz at @e[tag=block,scores={block=32}] align xyz run summon minecraft:falling_block ~0.5 ~ ~0.5 {BlockState:{Name:"minecraft:coal_block"},NoGravity:1b,Team:"block",Time:-1,DropItem:0b}

execute as @a[scores={bhbow=1..},tag=block] at @s run function datapack:blockhunt/bow
clear @a[scores={arrowcd=-1..},tag=block] arrow
item replace entity @a[scores={arrowcd=-1},tag=block] hotbar.8 with arrow 1
scoreboard players remove @a[scores={arrowcd=-1},tag=block] arrowcd 1
advancement revoke @a[scores={arrowcd=0},tag=block] only datapack:blockhunt/arrowhit
execute as @a[tag=block,scores={arrowcd=0..}] at @s run title @s actionbar ["",{"text":"Arrow Cooldown: ","color":"dark_green"},{"score":{"name":"@s","objective":"arrowcd"},"bold":true,"color":"white"},{"text":" Decoys: ","color":"dark_green"},{"score":{"name":"@s","objective":"bhdecoy"},"bold":true,"color":"white"},{"text":" Quick Changes: ","color":"dark_green"},{"score":{"name":"@s","objective":"bhquick"},"bold":true,"color":"white"}]
execute as @a[tag=hunter,scores={arrowcd=0..}] at @s run title @s actionbar ["",{"text":"Time Bomb Cooldown: ","color":"gold"},{"score":{"name":"@s","objective":"arrowcd"},"bold":true}]
execute as @a[tag=block,scores={arrowcd=-2}] at @s run title @s actionbar ["",{"text":"Arrow Ready!","color":"dark_green"},{"text":" Decoys: ","color":"dark_green"},{"score":{"name":"@s","objective":"bhdecoy"},"bold":true,"color":"white"},{"text":" Quick Changes: ","color":"dark_green"},{"score":{"name":"@s","objective":"bhquick"},"bold":true,"color":"white"}]
execute as @a[tag=hunter,scores={arrowcd=-2}] at @s run title @s actionbar ["",{"text":"Time Bomb Ready","color":"yellow"}]

give @a[scores={arrowcd=0},tag=hunter] minecraft:carrot_on_a_stick{display:{Name:'{"text":"Time Bomb","color":"gold","bold":true,"italic":false}',Lore:['{"text":"Sets a time bomb that explodes after 5 seconds.","color":"gray","italic":true}']},HideFlags:36,Unbreakable:1b,CustomModelData:701,timebomb:1} 1

scoreboard players remove @a[scores={arrowcd=0},tag=hunter] arrowcd 1

execute as @e[tag=timeb,scores={dummy=0}] at @s run summon minecraft:creeper ~ ~ ~ {Silent:1b,ExplosionRadius:4b,Fuse:0,ignited:1b}
execute as @e[tag=timeb,scores={dummy=0}] at @s run kill @s

execute as @a[scores={skill=1},nbt={SelectedItem:{tag:{disguise:1}}}] at @s run function datapack:blockhunt/bhdisguise
execute as @a[scores={blockhunt=0}] at @s run function datapack:blockhunt/respawn
execute if score Time_Left: blockhunt matches 0 run function datapack:blockhunt/blockwin
execute if score Blocks: blockhunt matches 0 run function datapack:blockhunt/hunterwin
execute as @a[scores={tempDeath=1..},tag=block] at @s run function datapack:blockhunt/blockdeath


#execute if score Time_Left: blockhunt matches 30 run effect give @e[tag=block] minecraft:glowing 1 0 true
execute if score Time_Left: blockhunt matches 1..7 run effect give @e[tag=block] minecraft:glowing 1 0 true

execute as @a[scores={skill=1},nbt={SelectedItem:{tag:{timebomb:1}}}] at @s run function datapack:blockhunt/timebomb
execute as @a[scores={skill=1},nbt={SelectedItem:{tag:{bhdecoy:1}}}] at @s run function datapack:blockhunt/decoy
execute as @a[scores={skill=1},nbt={SelectedItem:{tag:{bhquick:1}}}] at @s run function datapack:blockhunt/quickchange

execute as @e[tag=hunter] at @s run scoreboard players add @e[tag=decoy,type=armor_stand,distance=..2.5] dummy 1

execute as @e[tag=decoy,type=armor_stand,scores={dummy=60}] at @s if entity @a[tag=hunter,distance=..2.5] as @a[tag=hunter,distance=..6] at @s run playsound minecraft:entity.witch.celebrate master @a ~ ~ ~ 10 1.5
execute as @e[tag=decoy,type=armor_stand,scores={dummy=60}] at @s if entity @a[tag=hunter,distance=..2.5] run kill @s

execute as @e[tag=bhpoison] at @s run particle dust 0.016 0.380 0.004 2 ~ ~ ~ 2.5 1 2.5 0 10 normal
execute as @e[tag=bhpoison2] at @s run particle dust 0.016 0.380 0.004 2 ~ ~ ~ 2.5 1 2.5 0 10 normal
execute as @e[tag=bhpoison3] at @s run particle dust 0.016 0.380 0.004 2 ~ ~ ~ 2.5 1 2.5 0 10 normal
execute as @e[tag=bhpoison4] at @s run particle dust 0.016 0.380 0.004 2 ~ ~ ~ 2.5 1 2.5 0 10 normal
effect give @e[tag=bhpoison] minecraft:invisibility 2 1 true
effect give @e[tag=bhpoison2] minecraft:invisibility 2 1 true
effect give @e[tag=bhpoison3] minecraft:invisibility 2 1 true
effect give @e[tag=bhpoison4] minecraft:invisibility 2 1 true
effect give @e[tag=bhpoison] minecraft:resistance 2 50 true
effect give @e[tag=bhpoison2] minecraft:resistance 2 50 true
effect give @e[tag=bhpoison3] minecraft:resistance 2 50 true
effect give @e[tag=bhpoison4] minecraft:resistance 2 50 true
effect give @e[tag=bhpoison] minecraft:poison 2 10 true
effect give @e[tag=bhpoison2] minecraft:poison 2 10 true
effect give @e[tag=bhpoison3] minecraft:poison 2 10 true
effect give @e[tag=bhpoison4] minecraft:poison 2 10 true


effect give @a[tag=block] minecraft:invisibility 2 0 true
effect give @a[tag=block] minecraft:resistance 2 0 true
effect give @a[tag=block] minecraft:weakness 2 100 true
effect give @a[tag=hunter] resistance 2 100 true
effect give @a[tag=hunter] speed 2 0 true
effect clear @a[tag=hunter] minecraft:poison

execute as @e[tag=bhmarker] at @s run tp @s ~ ~ ~ ~3 ~
execute as @e[tag=bhmarker] at @s if entity @a[tag=block,distance=..10] run particle dust 0.369 1.000 0.000 2 ^ ^0.5 ^10 0 0.5 0 0 10 normal
execute as @e[tag=bhmarker] at @s unless entity @a[tag=block,distance=..10] run particle dust 1.000 0.000 0.000 2 ^ ^0.5 ^10 0 0.5 0 0 10 normal
execute as @e[tag=bhmarker] at @s if entity @a[tag=block,distance=..10] run particle dust 0.369 1.000 0.000 2 ^ ^0.5 ^-10 0 0.5 0 0 10 normal
execute as @e[tag=bhmarker] at @s unless entity @a[tag=block,distance=..10] run particle dust 1.000 0.000 0.000 2 ^ ^0.5 ^-10 0 0.5 0 0 10 normal

execute as @e[tag=bhmarker] at @s if entity @a[tag=block,distance=..10] run particle dust 0.369 1.000 0.000 2 ^10 ^0.5 ^ 0 0.5 0 0 10 normal
execute as @e[tag=bhmarker] at @s unless entity @a[tag=block,distance=..10] run particle dust 1.000 0.000 0.000 2 ^10 ^0.5 ^ 0 0.5 0 0 10 normal
execute as @e[tag=bhmarker] at @s if entity @a[tag=block,distance=..10] run particle dust 0.369 1.000 0.000 2 ^-10 ^0.5 ^ 0 0.5 0 0 10 normal
execute as @e[tag=bhmarker] at @s unless entity @a[tag=block,distance=..10] run particle dust 1.000 0.000 0.000 2 ^-10 ^0.5 ^ 0 0.5 0 0 10 normal



execute as @a[scores={BlockHunt=1}] at @s run function datapack:blockhunt/game
execute if score GameOn bhDummy matches 1 run schedule function datapack:blockhunt/bhpassive 1t 